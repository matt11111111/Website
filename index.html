<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Super Hot (Mini Version)</title>
  <style>
    body {
      background: #181818;
      min-height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    h1 {
      color: #fff;
      margin-top: 32px;
      margin-bottom: 8px;
      letter-spacing: 2px;
    }
    .instructions {
      color: #f44;
      margin-bottom: 24px;
      font-size: 1.1rem;
      text-align: center;
    }
    #game {
      background: #222;
      border-radius: 16px;
      box-shadow: 0 4px 16px rgba(60, 60, 120, 0.10);
      margin: 0 auto 24px auto;
      display: block;
      border: 2px solid #f44;
    }
    .footer {
      color: #888;
      font-size: 0.9rem;
      margin-top: 32px;
    }
    .superhot {
      color: #f44;
      font-size: 2rem;
      font-weight: bold;
      letter-spacing: 4px;
      margin-bottom: 12px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>SUPER<br>HOT</h1>
  <div class="instructions">Move with WASD or arrow keys. Shoot with Space. <br>Time moves only when you move!</div>
  <div class="superhot" id="superhot"></div>
  <canvas id="game" width="480" height="320"></canvas>
  <div class="footer">A mini version of SUPERHOT. Survive as long as you can!</div>
  <script>
// --- Mini SUPERHOT ---
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const W = canvas.width, H = canvas.height;

const player = { x: W/2, y: H-40, r: 14, speed: 3, color: '#fff', vx: 0, vy: 0 };
let bullets = [];
let enemies = [];
let enemyBullets = [];
let keys = {};
let lastMove = 0;
let gameOver = false;
let score = 0;
let superhotText = document.getElementById('superhot');

function resetGame() {
  player.x = W/2; player.y = H-40; player.vx = 0; player.vy = 0;
  bullets = [];
  enemies = [];
  enemyBullets = [];
  score = 0;
  gameOver = false;
  superhotText.textContent = '';
  spawnEnemy();
}

function drawPlayer() {
  ctx.beginPath();
  ctx.arc(player.x, player.y, player.r, 0, 2*Math.PI);
  ctx.fillStyle = player.color;
  ctx.fill();
}

function drawBullets() {
  ctx.fillStyle = '#fff';
  bullets.forEach(b => ctx.fillRect(b.x-2, b.y-6, 4, 12));
  ctx.fillStyle = '#f44';
  enemyBullets.forEach(b => ctx.fillRect(b.x-2, b.y-6, 4, 12));
}

function drawEnemies() {
  enemies.forEach(e => {
    ctx.beginPath();
    ctx.arc(e.x, e.y, e.r, 0, 2*Math.PI);
    ctx.fillStyle = '#f44';
    ctx.fill();
  });
}

function movePlayer() {
  let moved = false;
  let vx = 0, vy = 0;
  if (keys['ArrowLeft'] || keys['a']) { vx = -player.speed; moved = true; }
  if (keys['ArrowRight'] || keys['d']) { vx = player.speed; moved = true; }
  if (keys['ArrowUp'] || keys['w']) { vy = -player.speed; moved = true; }
  if (keys['ArrowDown'] || keys['s']) { vy = player.speed; moved = true; }
  player.vx = vx; player.vy = vy;
  if (moved) lastMove = Date.now();
}

function updatePlayer() {
  player.x += player.vx;
  player.y += player.vy;
  player.x = Math.max(player.r, Math.min(W-player.r, player.x));
  player.y = Math.max(player.r, Math.min(H-player.r, player.y));
}

function shoot() {
  bullets.push({ x: player.x, y: player.y-player.r, vy: -6 });
}

function updateBullets() {
  bullets.forEach(b => b.y += b.vy);
  bullets = bullets.filter(b => b.y > -10);
  enemyBullets.forEach(b => b.y += b.vy);
  enemyBullets = enemyBullets.filter(b => b.y < H+10);
}

function spawnEnemy() {
  let x = Math.random()*(W-40)+20;
  enemies.push({ x, y: 30, r: 14, cooldown: 60+Math.random()*60 });
}

function updateEnemies() {
  enemies.forEach(e => {
    if (Math.abs(e.x-player.x) > 2) e.x += (player.x > e.x ? 1 : -1)*1.2;
    e.cooldown--;
    if (e.cooldown <= 0) {
      enemyBullets.push({ x: e.x, y: e.y+e.r, vy: 4 });
      e.cooldown = 60+Math.random()*60;
    }
  });
  if (Math.random() < 0.01 + score/1000) spawnEnemy();
}

function checkCollisions() {
  // Player hit by enemy bullet
  for (let b of enemyBullets) {
    if (Math.hypot(b.x-player.x, b.y-player.y) < player.r+6) {
      gameOver = true;
      superhotText.textContent = 'SUPER\nHOT';
    }
  }
  // Player hit by enemy
  for (let e of enemies) {
    if (Math.hypot(e.x-player.x, e.y-player.y) < player.r+e.r) {
      gameOver = true;
      superhotText.textContent = 'SUPER\nHOT';
    }
  }
  // Bullet hits enemy
  bullets.forEach((b, bi) => {
    enemies.forEach((e, ei) => {
      if (Math.hypot(b.x-e.x, b.y-e.y) < e.r+6) {
        enemies.splice(ei,1);
        bullets.splice(bi,1);
        score++;
      }
    });
  });
}

function drawScore() {
  ctx.fillStyle = '#fff';
  ctx.font = '16px Arial';
  ctx.fillText('Score: '+score, 10, 24);
}

function gameLoop() {
  ctx.clearRect(0,0,W,H);
  movePlayer(); // <-- Ensure player movement is processed every frame
  drawPlayer();
  drawBullets();
  drawEnemies();
  drawScore();
  if (!gameOver) {
    requestAnimationFrame(gameLoop);
  }
}

function superhotTick() {
  if (gameOver) return;
  // Time only moves if player moves or shoots
  if (player.vx !== 0 || player.vy !== 0 || keys[' ']) {
    updatePlayer();
    updateBullets();
    updateEnemies();
    checkCollisions();
  }
  setTimeout(superhotTick, 30);
}

document.addEventListener('keydown', e => {
  keys[e.key] = true;
  if ((e.key === ' ' || e.key === 'Spacebar') && !gameOver) shoot();
  if (gameOver && e.key === 'r') resetGame();
});
document.addEventListener('keyup', e => {
  keys[e.key] = false;
});

resetGame();
gameLoop();
superhotTick();
  </script>
</body>
</html>
